local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local GuiService = game:GetService("GuiService")
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer
local backpack = player:WaitForChild("Backpack")

local zoneGap, titleHeight, bottomHeight = 10, 40, 20
local tabPanelWidth = 120

-- Fishing variables
local autoFishing = false
local autoEquipRod = false
shared.SpeedControl = { active = false, value = 32 }
shared.AutoFishing = false
shared.PlayerName = player.Name
shared.SelectedRod = "Fishing Rod"
shared.AutoEquipRod = false

-- Color System
local Colors = {
    DarkGray = Color3.fromRGB(35, 35, 35),
    MediumGray = Color3.fromRGB(50, 50, 50),
    LightGray = Color3.fromRGB(60, 60, 60),
    Red = Color3.fromRGB(255, 0, 0),
    Green = Color3.fromRGB(0, 255, 0),
    Blue = Color3.fromRGB(0, 100, 255),
    Yellow = Color3.fromRGB(255, 255, 0),
    Purple = Color3.fromRGB(128, 0, 128),
    Orange = Color3.fromRGB(255, 165, 0),
    Pink = Color3.fromRGB(255, 105, 180),
    Cyan = Color3.fromRGB(0, 255, 255),
}

local colorNames = {"DarkGray", "MediumGray", "LightGray", "Red", "Green", "Blue", "Yellow", "Purple", "Orange", "Pink", "Cyan"}

local currentSettings = {
    color1 = "DarkGray",
    color2 = "Blue",
    gradientEnabled = false,
    gradientRotation = 90
}

-- Function to brighten color
local function brightenColor(color, amount)
    amount = amount or 0.2
    local h, s, v = color:ToHSV()
    v = math.clamp(v + amount, 0, 1)
    return Color3.fromHSV(h, s, v)
end

local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.ResetOnSpawn = false
gui.Name = "Gui script by Georgiy/8"

local mainFrame = Instance.new("Frame", gui)
mainFrame.Size = UDim2.new(0, 500, 0, 400)
mainFrame.Position = UDim2.new(0.5, -250, 0.5, -200)
mainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
mainFrame.BorderSizePixel = 0
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 6)

-- A ‚Äî –ó–∞–≥–æ–ª–æ–≤–æ–∫
local titleBar = Instance.new("Frame", mainFrame)
titleBar.Size = UDim2.new(1, -2 * zoneGap, 0, titleHeight)
titleBar.Position = UDim2.new(0, zoneGap, 0, zoneGap)
titleBar.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
titleBar.BorderSizePixel = 0
titleBar.Active = true
Instance.new("UICorner", titleBar).CornerRadius = UDim.new(0, 6)

local titleLabel = Instance.new("TextLabel", titleBar)
titleLabel.Size = UDim2.new(1, -140, 1, 0)
titleLabel.Position = UDim2.new(0, 10, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "Pilgrammed Script by Georgiy/8"
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextSize = 18
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
titleLabel.TextXAlignment = Enum.TextXAlignment.Left

-- –°–ø–∏—Å–æ–∫ –≤–∫–ª–∞–¥–æ–∫
local tabs = {
    { name = "Main", icon = "üß≠" },
    { name = "Movement", icon = "üèÉ" },
    { name = "ESP", icon = "üëÅÔ∏è" },
    { name = "Float", icon = "ü™∂" },
    { name = "Fishing", icon = "üé£" },
    { name = "Settings", icon = "‚öôÔ∏è" },
}

-- B ‚Äî –í–∫–ª–∞–¥–∫–∏
local tabPanel = Instance.new("ScrollingFrame", mainFrame)
tabPanel.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
tabPanel.BorderSizePixel = 0
tabPanel.CanvasSize = UDim2.new(0, 0, 0, 0)
tabPanel.ScrollBarThickness = 6
tabPanel.AutomaticCanvasSize = Enum.AutomaticSize.Y
tabPanel.ScrollingDirection = Enum.ScrollingDirection.Y
Instance.new("UICorner", tabPanel).CornerRadius = UDim.new(0, 6)

local padding = Instance.new("UIPadding", tabPanel)
padding.PaddingLeft = UDim.new(0, 6)
padding.PaddingRight = UDim.new(0, 6)
padding.PaddingTop = UDim.new(0, 6)
padding.PaddingBottom = UDim.new(0, 6)

local layout = Instance.new("UIListLayout", tabPanel)
layout.Padding = UDim.new(0, 6)
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.VerticalAlignment = Enum.VerticalAlignment.Top

-- D ‚Äî –ö–æ–Ω—Ç–µ–Ω—Ç
local contentZone = Instance.new("ScrollingFrame", mainFrame)
contentZone.Name = "ContentZone"
contentZone.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
contentZone.BorderSizePixel = 0
contentZone.CanvasSize = UDim2.new(0, 0, 0, 0)
contentZone.ScrollBarThickness = 6
contentZone.AutomaticCanvasSize = Enum.AutomaticSize.Y
contentZone.ScrollingDirection = Enum.ScrollingDirection.Y
Instance.new("UICorner", contentZone).CornerRadius = UDim.new(0, 6)

local contentLayout = Instance.new("UIListLayout", contentZone)
contentLayout.Padding = UDim.new(0, 10)
contentLayout.SortOrder = Enum.SortOrder.LayoutOrder

local contentConstraint = Instance.new("UISizeConstraint", contentZone)
contentConstraint.MaxSize = Vector2.new(2000, 2000)

-- C ‚Äî –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å
local bottomBar = Instance.new("Frame", mainFrame)
bottomBar.Size = UDim2.new(1, -2 * zoneGap, 0, bottomHeight)
bottomBar.Position = UDim2.new(0, zoneGap, 1, -(bottomHeight + zoneGap))
bottomBar.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
bottomBar.BorderSizePixel = 0
Instance.new("UICorner", bottomBar).CornerRadius = UDim.new(0, 6)

-- –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–≤
local guiElements = {}
local tabButtons = {}

local function applyColors()
    if currentSettings.gradientEnabled then
        for _, elem in ipairs(guiElements) do
            local gradient = elem:FindFirstChildOfClass("UIGradient")
            if not gradient then
                gradient = Instance.new("UIGradient")
                gradient.Parent = elem
            end
            
            local brighterColor1 = brightenColor(Colors[currentSettings.color1], 0.15)
            local brighterColor2 = brightenColor(Colors[currentSettings.color2], 0.15)
            
            local colorSequence = ColorSequence.new({
                ColorSequenceKeypoint.new(0, brighterColor1),
                ColorSequenceKeypoint.new(1, brighterColor2)
            })
            
            gradient.Color = colorSequence
            gradient.Rotation = currentSettings.gradientRotation
        end
        
        for _, btn in ipairs(tabButtons) do
            local gradient = btn:FindFirstChildOfClass("UIGradient")
            if not gradient then
                gradient = Instance.new("UIGradient")
                gradient.Parent = btn
            end
            
            local brighterColor1 = brightenColor(Colors[currentSettings.color1], 0.25)
            local brighterColor2 = brightenColor(Colors[currentSettings.color2], 0.25)
            
            local colorSequence = ColorSequence.new({
                ColorSequenceKeypoint.new(0, brighterColor1),
                ColorSequenceKeypoint.new(1, brighterColor2)
            })
            
            gradient.Color = colorSequence
            gradient.Rotation = currentSettings.gradientRotation
        end
    else
        for _, elem in ipairs(guiElements) do
            local gradient = elem:FindFirstChildOfClass("UIGradient")
            if gradient then
                gradient:Destroy()
            end
            elem.BackgroundColor3 = brightenColor(Colors[currentSettings.color1], 0.15)
        end
        
        for _, btn in ipairs(tabButtons) do
            local gradient = btn:FindFirstChildOfClass("UIGradient")
            if gradient then
                gradient:Destroy()
            end
            btn.BackgroundColor3 = brightenColor(Colors[currentSettings.color1], 0.25)
        end
    end
end

table.insert(guiElements, mainFrame)
table.insert(guiElements, titleBar)
table.insert(guiElements, tabPanel)
table.insert(guiElements, contentZone)
table.insert(guiElements, bottomBar)

-- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤
local function updateLayout()
    RunService.Heartbeat:Wait()

    local mainW, mainH = mainFrame.AbsoluteSize.X, mainFrame.AbsoluteSize.Y
    local tabW = tabPanelWidth
    local leftOffset = tabW + zoneGap * 2

    local contentWidth = math.max(0, mainW - leftOffset - zoneGap)
    local contentHeight = math.max(0, mainH - (titleHeight + bottomHeight + zoneGap * 4))

    tabPanel.Size = UDim2.new(0, tabW, 0, contentHeight)
    tabPanel.Position = UDim2.new(0, zoneGap, 0, titleHeight + zoneGap * 2)

    titleBar.Size = UDim2.new(1, -2 * zoneGap, 0, titleHeight)
    titleBar.Position = UDim2.new(0, zoneGap, 0, zoneGap)
    titleLabel.Size = UDim2.new(1, -140, 1, 0)
    titleLabel.Position = UDim2.new(0, 10, 0, 0)

    bottomBar.Size = UDim2.new(0, mainW - 2 * zoneGap, 0, bottomHeight)
    bottomBar.Position = UDim2.new(0, zoneGap, 0, mainH - (bottomHeight + zoneGap))

    contentZone.Position = UDim2.new(0, leftOffset, 0, titleHeight + zoneGap * 2)
    contentZone.Size = UDim2.new(0, contentWidth, 0, contentHeight)

    contentZone.CanvasSize = UDim2.new(0, 0, 0, contentLayout.AbsoluteContentSize.Y + 20)
    tabPanel.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 12)
end

mainFrame:GetPropertyChangedSignal("AbsoluteSize"):Connect(updateLayout)
tabPanel:GetPropertyChangedSignal("AbsoluteSize"):Connect(updateLayout)

-- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
local dragging, dragStart, startPos
titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
    end
end)
UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)
UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
end)

-- –†–µ—Å–∞–π–∑
local resizeHandle = Instance.new("Frame", bottomBar)
resizeHandle.Size = UDim2.new(0, 20, 0, 20)
resizeHandle.Position = UDim2.new(1, -20, 0, 0)
resizeHandle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
resizeHandle.BorderSizePixel = 0
Instance.new("UICorner", resizeHandle).CornerRadius = UDim.new(0, 4)

local resizing = false
resizeHandle.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then resizing = true end
end)
UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then resizing = false end
end)
UserInputService.InputChanged:Connect(function(input)
    if resizing and input.UserInputType == Enum.UserInputType.MouseMovement then
        local mouse = UserInputService:GetMouseLocation()
        local inset = GuiService:GetGuiInset()
        local newWidth = math.clamp(mouse.X - mainFrame.AbsolutePosition.X, 300, 1000)
        local newHeight = math.clamp(mouse.Y - mainFrame.AbsolutePosition.Y - inset.Y, 200, 800)
        mainFrame.Size = UDim2.new(0, newWidth, 0, newHeight)
    end
end)

-- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
local restoreGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
restoreGui.ResetOnSpawn = false
restoreGui.Name = "RestoreButtonGui"
restoreGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
restoreGui.DisplayOrder = 1000
restoreGui.Enabled = false

local restoreButton = Instance.new("TextButton", restoreGui)
restoreButton.Size = UDim2.new(0, 100, 0, 40)
restoreButton.Position = UDim2.new(0, 20, 1, -60)
restoreButton.BackgroundColor3 = Color3.fromRGB(255, 200, 40)
restoreButton.Text = "–û—Ç–∫—Ä—ã—Ç—å GUI"
restoreButton.Font = Enum.Font.GothamBold
restoreButton.TextSize = 16
restoreButton.TextColor3 = Color3.fromRGB(0, 0, 0)
restoreButton.BorderSizePixel = 0
Instance.new("UICorner", restoreButton).CornerRadius = UDim.new(0, 6)

restoreButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = true
    restoreGui.Enabled = false
end)

-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–∫–Ω–æ–º
local isMaximized = false
local prevSize = mainFrame.Size
local prevPos = mainFrame.Position

local function createTitleButton(txt, offset, callback)
    local btn = Instance.new("TextButton", titleBar)
    btn.Size = UDim2.new(0, 30, 0, 30)
    btn.Position = UDim2.new(1, -offset, 0, 5)
    btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    btn.Text = txt
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 18
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.BorderSizePixel = 0
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 4)
    btn.MouseButton1Click:Connect(callback)
end

createTitleButton("_", 100, function()
    mainFrame.Visible = false
    restoreGui.Enabled = true
end)

createTitleButton("‚ñ°", 65, function()
    if not isMaximized then
        prevSize = mainFrame.Size
        prevPos = mainFrame.Position
        mainFrame.Size = UDim2.new(1, -40, 1, -40)
        mainFrame.Position = UDim2.new(0, 20, 0, 20)
        isMaximized = true
    else
        mainFrame.Size = prevSize
        mainFrame.Position = prevPos
        isMaximized = false
    end
end)

createTitleButton("X", 30, function()
    gui:Destroy()
    restoreGui:Destroy()
end)

-- Fishing helper
local function tryEquipRod(rodName)
    if not rodName then return false end
    if player.Character then
        local inChar = player.Character:FindFirstChild(rodName)
        if inChar and inChar:IsA("Tool") then return true end
    end
    local tool = backpack:FindFirstChild(rodName)
    if tool and tool:IsA("Tool") then
        tool.Parent = player.Character
        return true
    end
    local found = false
    local conn
    conn = backpack.ChildAdded:Connect(function(child)
        if child.Name == rodName and child:IsA("Tool") then
            child.Parent = player.Character
            found = true
            if conn then conn:Disconnect() end
        end
    end)
    local t = 0
    while t < 3 and not found do
        task.wait(0.1)
        t = t + 0.1
    end
    if conn then conn:Disconnect() end
    return found
end

-- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è Fishing –∫–æ–Ω—Ç–µ–Ω—Ç–∞
local function createFishingContent()
    local container = Instance.new("Frame", contentZone)
    container.Size = UDim2.new(1, -20, 0, 240)
    container.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    container.BorderSizePixel = 0
    container.LayoutOrder = 1
    Instance.new("UICorner", container).CornerRadius = UDim.new(0, 6)

    local toggleButton = Instance.new("TextButton", container)
    toggleButton.Size = UDim2.new(1, -20, 0, 40)
    toggleButton.Position = UDim2.new(0, 10, 0, 10)
    toggleButton.Text = "–í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ-—Ä—ã–±–∞–ª–∫—É"
    toggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    toggleButton.TextColor3 = Color3.new(1, 1, 1)
    toggleButton.Font = Enum.Font.GothamBold
    toggleButton.TextSize = 16
    Instance.new("UICorner", toggleButton).CornerRadius = UDim.new(0, 4)

    local statusLabel = Instance.new("TextLabel", container)
    statusLabel.Size = UDim2.new(1, -20, 0, 20)
    statusLabel.Position = UDim2.new(0, 10, 0, 60)
    statusLabel.Text = "–°—Ç–∞—Ç—É—Å: üî¥ –í—ã–∫–ª—é—á–µ–Ω–æ"
    statusLabel.BackgroundTransparency = 1
    statusLabel.TextColor3 = Color3.new(1, 1, 1)
    statusLabel.Font = Enum.Font.Gotham
    statusLabel.TextSize = 14

    local biteLabel = Instance.new("TextLabel", container)
    biteLabel.Size = UDim2.new(1, -20, 0, 20)
    biteLabel.Position = UDim2.new(0, 10, 0, 85)
    biteLabel.Text = "–ü–æ–∫–ª—ë–≤–∫–∞: ‚ö™ –ù–µ—Ç"
    biteLabel.BackgroundTransparency = 1
    biteLabel.TextColor3 = Color3.new(1, 1, 1)
    biteLabel.Font = Enum.Font.Gotham
    biteLabel.TextSize = 14

    local rodLabel = Instance.new("TextLabel", container)
    rodLabel.Size = UDim2.new(0, 120, 0, 20)
    rodLabel.Position = UDim2.new(0, 10, 0, 115)
    rodLabel.BackgroundTransparency = 1
    rodLabel.Text = "–£–¥–æ—á–∫–∞:"
    rodLabel.Font = Enum.Font.Gotham
    rodLabel.TextSize = 14
    rodLabel.TextColor3 = Color3.fromRGB(220,220,220)
    rodLabel.TextXAlignment = Enum.TextXAlignment.Left

    local rodButton = Instance.new("TextButton", container)
    rodButton.Size = UDim2.new(0, 200, 0, 28)
    rodButton.Position = UDim2.new(0, 130, 0, 111)
    rodButton.Text = shared.SelectedRod
    rodButton.Font = Enum.Font.Gotham
    rodButton.TextSize = 14
    rodButton.BackgroundColor3 = Color3.fromRGB(60,60,60)
    rodButton.TextColor3 = Color3.fromRGB(255,255,255)
    rodButton.BorderSizePixel = 0
    Instance.new("UICorner", rodButton).CornerRadius = UDim.new(0,4)

    local dropdown = Instance.new("Frame", container)
    dropdown.Size = UDim2.new(0, 200, 0, 0)
    dropdown.Position = UDim2.new(0, 130, 0, 141)
    dropdown.BackgroundColor3 = Color3.fromRGB(50,50,50)
    dropdown.BorderSizePixel = 0
    Instance.new("UICorner", dropdown).CornerRadius = UDim.new(0,4)
    dropdown.ClipsDescendants = true
    dropdown.Visible = false

    local rodOptions = { "Fishing Rod", "Advenced Rod", "Rod of Kings" }

    for idx, name in ipairs(rodOptions) do
        local opt = Instance.new("TextButton", dropdown)
        opt.Size = UDim2.new(1, 0, 0, 28)
        opt.Position = UDim2.new(0, 0, 0, (idx-1)*28)
        opt.Text = name
        opt.Font = Enum.Font.Gotham
        opt.TextSize = 14
        opt.BackgroundColor3 = Color3.fromRGB(60,60,60)
        opt.TextColor3 = Color3.fromRGB(255,255,255)
        opt.BorderSizePixel = 0
        Instance.new("UICorner", opt).CornerRadius = UDim.new(0,4)

        opt.MouseButton1Click:Connect(function()
            shared.SelectedRod = name
            rodButton.Text = name
            local tween = TweenService:Create(dropdown, TweenInfo.new(0.15), {Size = UDim2.new(0,200,0,0)})
            tween:Play()
            tween.Completed:Wait()
            dropdown.Visible = false
        end)
    end

    rodButton.MouseButton1Click:Connect(function()
        if dropdown.Visible then
            local tween = TweenService:Create(dropdown, TweenInfo.new(0.12), {Size = UDim2.new(0,200,0,0)})
            tween:Play()
            tween.Completed:Wait()
            dropdown.Visible = false
        else
            dropdown.Visible = true
            local targetSize = UDim2.new(0,200,0,#rodOptions * 28)
            local tween = TweenService:Create(dropdown, TweenInfo.new(0.12), {Size = targetSize})
            tween:Play()
        end
    end)

    local equipLabel = Instance.new("TextLabel", container)
    equipLabel.Size = UDim2.new(0, 160, 0, 20)
    equipLabel.Position = UDim2.new(0, 10, 0, 160)
    equipLabel.BackgroundTransparency = 1
    equipLabel.Text = "–ê–≤—Ç–æ-—ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞ —É–¥–æ—á–∫–∏"
    equipLabel.Font = Enum.Font.Gotham
    equipLabel.TextSize = 14
    equipLabel.TextColor3 = Color3.fromRGB(220,220,220)
    equipLabel.TextXAlignment = Enum.TextXAlignment.Left

    local equipToggle = Instance.new("TextButton", container)
    equipToggle.Size = UDim2.new(0, 120, 0, 24)
    equipToggle.Position = UDim2.new(0, 170, 0, 156)
    equipToggle.Text = "OFF"
    equipToggle.Font = Enum.Font.GothamBold
    equipToggle.TextSize = 14
    equipToggle.BackgroundColor3 = Color3.fromRGB(180,60,60)
    equipToggle.TextColor3 = Color3.fromRGB(255,255,255)
    equipToggle.BorderSizePixel = 0
    Instance.new("UICorner", equipToggle).CornerRadius = UDim.new(0,4)

    local function playEquipPulse(success)
        local toColor = success and Color3.fromRGB(40,180,80) or Color3.fromRGB(200,60,60)
        local tweenIn = TweenService:Create(equipToggle, TweenInfo.new(0.12), {BackgroundColor3 = toColor})
        local tweenOut = TweenService:Create(equipToggle, TweenInfo.new(0.35), {BackgroundColor3 = Color3.fromRGB(60,60,60)})
        tweenIn:Play()
        tweenIn.Completed:Wait()
        tweenOut:Play()
    end

    equipToggle.MouseButton1Click:Connect(function()
        autoEquipRod = not autoEquipRod
        shared.AutoEquipRod = autoEquipRod
        equipToggle.Text = autoEquipRod and "ON" or "OFF"
        equipToggle.BackgroundColor3 = autoEquipRod and Color3.fromRGB(40,180,80) or Color3.fromRGB(180,60,60)
        if autoEquipRod then
            local ok = tryEquipRod(shared.SelectedRod)
            playEquipPulse(ok)
        end
    end)

    toggleButton.MouseButton1Click:Connect(function()
        autoFishing = not autoFishing
        shared.AutoFishing = autoFishing
        toggleButton.Text = autoFishing and "–í—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ-—Ä—ã–±–∞–ª–∫—É" or "–í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ-—Ä—ã–±–∞–ª–∫—É"
    end)

    task.spawn(function()
        while true do
            if autoFishing then
                statusLabel.Text = "–°—Ç–∞—Ç—É—Å: üü¢ –†–∞–±–æ—Ç–∞–µ—Ç"
                biteLabel.Text = "–ü–æ–∫–ª—ë–≤–∫–∞: ‚ö™ –ù–µ—Ç"

                if autoEquipRod then
                    local equipped = false
                    if player.Character and player.Character:FindFirstChild(shared.SelectedRod) then
                        equipped = true
                    end
                    if not equipped then
                        local ok = tryEquipRod(shared.SelectedRod)
                        if ok then playEquipPulse(true) end
                    end
                end

                local mx, my = UserInputService:GetMouseLocation().X, UserInputService:GetMouseLocation().Y
                VirtualInputManager:SendMouseButtonEvent(mx, my, 0, true, game, 0)
                task.wait(0.03)
                VirtualInputManager:SendMouseButtonEvent(mx, my, 0, false, game, 0)

                local bobber = nil
                local timeout = 5
                local t = 0
                repeat
                    bobber = workspace:FindFirstChild("Bobber")
                    task.wait(0.1)
                    t = t + 0.1
                until bobber or t >= timeout

                if not bobber then
                    task.wait(1)
                    continue
                end

                local lastCenter = bobber.AssemblyCenterOfMass
                local noMoveTime = 0
                local heartbeatConn

                heartbeatConn = RunService.Heartbeat:Connect(function(dt)
                    if not bobber or not bobber.Parent then return end
                    local newCenter = bobber.AssemblyCenterOfMass
                    local delta = (newCenter - lastCenter).Magnitude

                    if delta > 0.01 then
                        biteLabel.Text = "–ü–æ–∫–ª—ë–≤–∫–∞: ‚ö° –ï—Å—Ç—å!"
                        local mx2, my2 = UserInputService:GetMouseLocation().X, UserInputService:GetMouseLocation().Y
                        VirtualInputManager:SendMouseButtonEvent(mx2, my2, 0, true, game, 0)
                        task.wait(0.03)
                        VirtualInputManager:SendMouseButtonEvent(mx2, my2, 0, false, game, 0)
                        noMoveTime = 0
                    else
                        biteLabel.Text = "–ü–æ–∫–ª—ë–≤–∫–∞: ‚ö™ –ù–µ—Ç"
                        noMoveTime = noMoveTime + dt
                    end

                    if noMoveTime >= 10 then
                        local mx3, my3 = UserInputService:GetMouseLocation().X, UserInputService:GetMouseLocation().Y
                        VirtualInputManager:SendMouseButtonEvent(mx3, my3, 0, true, game, 0)
                        task.wait(0.03)
                        VirtualInputManager:SendMouseButtonEvent(mx3, my3, 0, false, game, 0)
                        noMoveTime = 0
                    end

                    lastCenter = newCenter
                end)

                repeat task.wait(0.2) until not bobber.Parent
                if heartbeatConn then heartbeatConn:Disconnect() end
            else
                statusLabel.Text = "–°—Ç–∞—Ç—É—Å: üî¥ –í—ã–∫–ª—é—á–µ–Ω–æ"
				biteLabel.Text = "–ü–æ–∫–ª—ë–≤–∫–∞: ‚ö™ –ù–µ—Ç"
                task.wait(0.5)
            end
        end
    end)
end

-- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è Settings –∫–æ–Ω—Ç–µ–Ω—Ç–∞
local function createSettingsContent()
    local padding = Instance.new("UIPadding", contentZone)
    padding.PaddingLeft = UDim.new(0, 10)
    padding.PaddingRight = UDim.new(0, 10)
    padding.PaddingTop = UDim.new(0, 10)
    
    local titleLabel = Instance.new("TextLabel", contentZone)
    titleLabel.Size = UDim2.new(1, -20, 0, 30)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = "üé® Color Settings"
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextSize = 20
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.LayoutOrder = 1
    
    local color1Frame = Instance.new("Frame", contentZone)
    color1Frame.Size = UDim2.new(1, -20, 0, 200)
    color1Frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    color1Frame.BorderSizePixel = 0
    color1Frame.LayoutOrder = 2
    Instance.new("UICorner", color1Frame).CornerRadius = UDim.new(0, 6)
    
    local color1Title = Instance.new("TextLabel", color1Frame)
    color1Title.Size = UDim2.new(1, -20, 0, 25)
    color1Title.Position = UDim2.new(0, 10, 0, 10)
    color1Title.BackgroundTransparency = 1
    color1Title.Text = "Primary Color"
    color1Title.Font = Enum.Font.GothamBold
    color1Title.TextSize = 16
    color1Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    color1Title.TextXAlignment = Enum.TextXAlignment.Left
    
    local color1Grid = Instance.new("Frame", color1Frame)
    color1Grid.Size = UDim2.new(1, -20, 0, 155)
    color1Grid.Position = UDim2.new(0, 10, 0, 40)
    color1Grid.BackgroundTransparency = 1
    
    local gridLayout1 = Instance.new("UIGridLayout", color1Grid)
    gridLayout1.CellSize = UDim2.new(0, 45, 0, 45)
    gridLayout1.CellPadding = UDim2.new(0, 5, 0, 5)
    
    local color2Frame = Instance.new("Frame", contentZone)
    color2Frame.Size = UDim2.new(1, -20, 0, 200)
    color2Frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    color2Frame.BorderSizePixel = 0
    color2Frame.LayoutOrder = 3
    Instance.new("UICorner", color2Frame).CornerRadius = UDim.new(0, 6)
    
    local color2Title = Instance.new("TextLabel", color2Frame)
    color2Title.Size = UDim2.new(1, -20, 0, 25)
    color2Title.Position = UDim2.new(0, 10, 0, 10)
    color2Title.BackgroundTransparency = 1
    color2Title.Text = "Secondary Color (Gradient)"
    color2Title.Font = Enum.Font.GothamBold
    color2Title.TextSize = 16
    color2Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    color2Title.TextXAlignment = Enum.TextXAlignment.Left
    
    local color2Grid = Instance.new("Frame", color2Frame)
    color2Grid.Size = UDim2.new(1, -20, 0, 155)
    color2Grid.Position = UDim2.new(0, 10, 0, 40)
    color2Grid.BackgroundTransparency = 1
    
    local gridLayout2 = Instance.new("UIGridLayout", color2Grid)
    gridLayout2.CellSize = UDim2.new(0, 45, 0, 45)
    gridLayout2.CellPadding = UDim2.new(0, 5, 0, 5)
    
    local gradientButton = Instance.new("TextButton", contentZone)
    gradientButton.Size = UDim2.new(1, -20, 0, 50)
    gradientButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
    gradientButton.Text = "üé® Gradient Mode: OFF"
    gradientButton.Font = Enum.Font.GothamBold
    gradientButton.TextSize = 18
    gradientButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    gradientButton.BorderSizePixel = 0
    gradientButton.LayoutOrder = 4
    Instance.new("UICorner", gradientButton).CornerRadius = UDim.new(0, 6)
    
    local selectedButtons1 = {}
    local selectedButtons2 = {}
    
    for i, colorName in ipairs(colorNames) do
        local btn1 = Instance.new("TextButton", color1Grid)
        btn1.BackgroundColor3 = Colors[colorName]
        btn1.Text = ""
        btn1.BorderSizePixel = 2
        btn1.BorderColor3 = Color3.fromRGB(255, 255, 255)
        btn1.BorderMode = Enum.BorderMode.Inset
        Instance.new("UICorner", btn1).CornerRadius = UDim.new(0, 6)
        
        if colorName == currentSettings.color1 then
            btn1.BorderSizePixel = 4
        end
        
        selectedButtons1[colorName] = btn1
        
        btn1.MouseButton1Click:Connect(function()
            for name, button in pairs(selectedButtons1) do
                button.BorderSizePixel = 2
            end
            btn1.BorderSizePixel = 4
            currentSettings.color1 = colorName
            applyColors()
        end)
        
        local btn2 = Instance.new("TextButton", color2Grid)
        btn2.BackgroundColor3 = Colors[colorName]
        btn2.Text = ""
        btn2.BorderSizePixel = 2
        btn2.BorderColor3 = Color3.fromRGB(255, 255, 255)
        btn2.BorderMode = Enum.BorderMode.Inset
        Instance.new("UICorner", btn2).CornerRadius = UDim.new(0, 6)
        
        if colorName == currentSettings.color2 then
            btn2.BorderSizePixel = 4
        end
        
        selectedButtons2[colorName] = btn2
        
        btn2.MouseButton1Click:Connect(function()
            for name, button in pairs(selectedButtons2) do
                button.BorderSizePixel = 2
            end
            btn2.BorderSizePixel = 4
            currentSettings.color2 = colorName
            if currentSettings.gradientEnabled then
                applyColors()
            end
        end)
    end
    
    gradientButton.MouseButton1Click:Connect(function()
        currentSettings.gradientEnabled = not currentSettings.gradientEnabled
        if currentSettings.gradientEnabled then
            gradientButton.Text = "üé® Gradient Mode: ON"
            gradientButton.BackgroundColor3 = Color3.fromRGB(100, 255, 100)
        else
            gradientButton.Text = "üé® Gradient Mode: OFF"
            gradientButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
        end
        applyColors()
    end)
end

-- –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –≤–∫–ª–∞–¥–æ–∫
local function clearContentZone()
    for _, child in ipairs(contentZone:GetChildren()) do
        if child ~= contentLayout and child ~= contentConstraint then
            if child:IsA("GuiObject") then child:Destroy() end
        end
    end
end

for i, tab in ipairs(tabs) do
    local btn = Instance.new("TextButton", tabPanel)
    btn.LayoutOrder = i
    btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    if i == #tabs then
        btn.Text = tab.icon .. " " .. tab.name
    else
        btn.Text = ""
    end
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 16
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.BorderSizePixel = 0
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 4)
    btn.Size = UDim2.new(1, 0, 0, 28)
    btn.Position = UDim2.new(0, 0, 0, 0)
    
    table.insert(tabButtons, btn)

    btn.MouseButton1Click:Connect(function()
        clearContentZone()
        
        if tab.name == "Fishing" then
            createFishingContent()
        elseif tab.name == "Settings" then
            createSettingsContent()
        end
        
        contentZone.CanvasSize = UDim2.new(0, 0, 0, contentLayout.AbsoluteContentSize.Y + 20)
    end)
end

wait()
updateLayout()
contentZone.CanvasSize = UDim2.new(0, 0, 0, contentLayout.AbsoluteContentSize.Y + 20)
tabPanel.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 12)
